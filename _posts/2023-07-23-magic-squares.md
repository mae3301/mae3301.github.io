---
layout: post
title: Lab Report on Magic Squares 
---

## Summary

[*Liber Primus*](https://uncovering-cicada.fandom.com/wiki/Liber_Primus_Unsolved_Pages) contains two magic squares of numbers in sections 3 and 7.  The deciphered portions of that text provide words "matching" some, but not all, of the numbers in those squares. The explanation of what it means for a word to "match" a number is detailed in this report.

## Disclaimer/Warning
Nothing dangerous about this investigation, unless it is the danger posed to one's mental health by obsessing.  

Some of the history is taken from the Uncovering Cicada [wiki](https://uncovering-cicada.fandom.com/wiki/Uncovering_Cicada_Wiki) and Nox Populi's [youtube channel](https://www.youtube.com/@NoxPopuli), since I did not participate in the 2012-2014 challenges.  I have tried my best to link back to these sources where appropriate.

## Introduction 
Setting up the parameters of the problem here requires a deep dive into the world of the 3301 challenge and the puzzles leading up to the delivery of the final 58 pages of *Liber Primus*.

### 2013

In 2013, solving the puzzles included uncovering the following [jpg file](https://uncovering-cicada.fandom.com/wiki/What_Happened_Part_1_(2013)?file=Testout.jpg). Inspecting the image shows a three-column table entitled "Gematria Primus: an order and a value as revealed through 3301."  The table, reproduced below, presents 29 unfamiliar symbols labeled as "runes" in order. The table also maps the ordered runes to the series of ascending prime numbers, so that the first prime (2) is the value of the first letter ("ᚠ"), and so on. Finally the table maps each rune to a letter of the Roman alphabet. 

|Rune | Letter | Value |                  
|:------:|:----------:|:--------:|       
|ᚠ| F | 2 |				  
|ᚢ| U | 3 |                               
|ᚦ| TH | 5 |                               
|ᚩ|O|7|					  
|ᚱ|R|11|				  
|ᚳ|C/K|13|				  
|ᚷ|G|17|				  
|ᚹ|W|19|			         
|ᚻ|H|23|                                 
|ᚾ|N|29|				 
|ᛁ|I|31|                                 
|ᛄ|J|37|                                 
|ᛇ|EO|41|                                
|ᛈ|P|43|                                  
|ᛉ|X|47|
|ᛋ|S/Z|53|
|ᛏ|T|59|
|ᛒ|B|61| 
|ᛖ|E|67|
|ᛗ|M|71|
|ᛚ|L|73|
|ᛝ|NG/ING|79|
|ᛟ|OE|83|
|ᛞ|D|89|
|ᚪ|A|97|
|ᚫ|AE|101|
|ᚣ|Y|103|
|ᛡ|IA/IO|107|
|ᛠ|EA|109| 

Besides providing solvers with a mapping of sorts, the jpg introduced the idea of gematria to the puzzle. The word comes from Hebrew; Wikipedia [defines it](https://en.wikipedia.org/wiki/Gematria) as "the practice of assigning a numerical value to a name, word or phrase by reading it as a number." It is well-known as a feature of Jewish commentary on the Hebrew Bible, but other cultures have practiced it also. The runes provided by the table are of course not Hebrew letters. According to the [cicada wiki](https://uncovering-cicada.fandom.com/wiki/What_Happened_Part_1_(2013)#The_Gematria), they were identified by a solver as a variant of the Anglo-Saxon rune set. 

Other stages of the 2013 puzzle encouraged solvers to use the values of characters to perform traditional and perhaps less traditional feats of gematria. For instance, the 2013 [telnet service](https://www.youtube.com/watch?v=9bjFtZ3aoSQ&ab_channel=NoxPopuli) encouraged solvers to add up the values associated with letters in a word to arrive at a larger number (henceforth referred to as a gematria sum). A second example, the poem "Parable," essentially taught solvers to associate sentences with the gematria sums of the values of the characters making them up. It even illustrated how multiplying together the gematria sums of three sentences led to a [gematria product](https://uncovering-cicada.fandom.com/wiki/Instar_emergence_(mp3_and_hidden_poem)). 

### 2014
The 2014 puzzle required solvers to submit one of [three magic squares](https://uncovering-cicada.fandom.com/wiki/What_Happened_Part_1_(2014)#The_Sixth_Onion) to a service in order to reach the next step of the game. A magic square is an matrix of numbers whose rows, columns, and sometimes diagonals all sum to the same number. The magic squares used by 3301 had sums of 3301 and 1033. One of the squares (sum 1033) is the following:

|272|138|341|131|151|
|366|199|130|320|18|
|226|245|91|245|226|
|18|320|130|199|366|
|151|131|341|138|272|

Two of the very same magic squares then appear in the first portion of *Liber Primus*, "Intus".  The second square is simply represented as numbers, but the first square (sum 1033) is more interesting. In *Liber Primus* some of the numbers have been replaced by words whose gematria sum equals the number.

|272|138|ᛋᚻᚪᛞᚩᚹᛋ|131|151|
|ᚫᚦᛖᚱᛠᛚ|ᛒᚢᚠᚠᛖᚱᛋ|ᚢᚩᛁᛞ|ᚳᚪᚱᚾᚪᛚ|18|
|226|ᚩᛒᛋᚳᚢᚱᚪ|ᚠᚩᚱᛗ|245|ᛗᚩᛒᛁᚢᛋ|
|18|ᚪᚾᚪᛚᚩᚷ|ᚢᚩᛁᛞ|ᛗᚩᚢᚱᚾᚠᚢᛚ|ᚫᚦᛖᚱᛠᛚ|
|151|131|ᚳᚪᛒᚪᛚ|138|272|

For instance, in the first row, the number 341 has been replaced by "ᛋᚻᚪᛞᚩᚹᛋ" ("SHADOWS"), a word whose gematria sum is 53 + 23 + 97 + 89 + 7 + 19 + 53 = 341.
### 2016
In 2016, 3301 posted the following enigmatic signed message to their twitter account.

    Hello.

    The path lies empty; epiphany seeks the devoted.

    Liber Primus is the way.  Its words are the map, their
    meaning is the road, and their numbers are the direction.

    Seek and you will be found.


    Good luck.

    3301

The phrase "their numbers" calls back to the first section of "Intus," which warns: "Do not edit or change this book. Or the message contained within. Either the words or their numbers. For all is sacred." 

In both cases, 3301 refers to the "numbers" of the words.  In what sense does a word possess a number or numbers? A gematria sum of the individual letters in the word is certainly one way, and one that had been reinforced by previous puzzles.

It seemed to me that if 3301 wanted solvers to look at the numbers of the words, maybe the magic square was a clue. Maybe expanding the squares into a concatenation of runes would provide a key to decode the rest of the text.  Thus I set out to look for words or sentences in the solved *Liber Primus* whose gematria sums were in the magic squares.   

### A brief mathematical treatment of the Gematria Primus
The point of this section is to arrive at some fairly simple conclusions in a concise way, for those whose thinking is aided by symbolism. Nothing about summing up rune values is super sophisticated, so feel free to ignore the math parts if they don't help you.

Let  $$\textit{R}$$ be the set of runes.  Let $$\textit{R*}$$ be the set of all strings over R, which will include all English words spelled with runes. Let $$\Lambda$$ represent the empty string and let $$P(n)$$ be the set of the first $$n$$ prime numbers.  

We can treat the "value" of a rune as a mapping from each of the 29 runes in the runic alphabet to a prime number.  That is:

$$\textbf{V}: R \rightarrow P(29)$$

The definition of $$\textbf{V}$$ is simply defined by the gematria table above. $$\textbf{V}$$ is a function, insofar as each rune is associated with only one prime. It is moreover one-to-one, insofar as each prime in $$P(29)$$ is associated with at most one rune. 

The gematria sum (henceforth $$\textbf{G}$$) is a second and related mapping. Its domain is all strings of runes and its range is a natural number, which may or may not be prime.  Formally:

$$\textbf{G}: R^* \rightarrow \mathbb{N}$$

We have already seen that $$\textbf{G}$$ is just calculated by summing up the values of individual runes, but we can also provide a formal (and recursive) definition that relies on regular expressions.
For $$s \in \textit{R*}$$,

$$\textbf{G}(s) = \begin{cases}
   0 &\text{if } s = \Lambda \\
   \textbf{V}(r) + \textbf{G}(r*) &\text{if } s = rr*
\end{cases}$$

(Here $$rr*$$ means "a rune, followed by 0 or more runes.)

Like $$\textbf{V}$$, $$\textbf{G}$$ is a function: each string of runes has a single gematria sum. However, it definitely is not one-to-one. Many different strings for runes have the same sum. This means that the inverse of $$\textbf{G}$$, $$\textbf{G}^{-1}$$, is not a function. Practically speaking, any attempt to map a number back to a string of runes requires choosing which of many different rune strings to associate with that number. Simply requiring that the string be an English word is not enough. In fact, the magic square illustrates this property of the gematria sum by associating the runic words "ᚳᚪᛒᚪᛚ" ("cabal") and "ᛋᚻᚪᛞᚩᚹᛋ" ("shadows") with the number 341.

Moreover, $$\textbf{G}$$ is not "onto" the natural numbers, because no string equals 1. When restricting  $$\textbf{G}$$ to English, the problem is worse.  We know, at the very least, that there is no rune string in English corresponding to the numbers 2 and 5. ("F"=2 is not a word, nor is "TH", "FU", or "UF".) For large numbers like 1071 (in the second magic square), it is difficult to guess. 

How then to choose a the universe of strings for my search? Since the 2016 hint mentioned the *Liber Primus* in particular, I decided to focus on the solved portion of that text. Of course, narrowing the search this way didn't guarantee that I would find exactly what I was looking for: one or at most two English words or sentences associated with each number in each magic square. I was hoping that in this respect the text would be well-behaved. That result in turn would make me feel like I was on the right track. 

## Method
My method was pretty simple.  I wrote a python program to calculate the gematria sums of the words and sentences in the solved pages. Once I had this data, I iterated through the numbers in each magic square to see if one or more word was associated with the number.  I have posted [some code](https://github.com/mae3301/lp_experiments/blob/main/code/gematria_square_search.py) that shows how to read in processed data and check for the presence of gematria sums. (My full code to process the master text is definitely under construction.)
 
## Results ##
I was able to find words corresponding to all but one of the numbers in the first magic square and only two numbers in the second magic square. Admittedly for matrix 1, many of these words were the words already provided by 3301 as matches. No sentence in *Liber Primus* corresponded to any magic square numbers.

The results are presented below.

|numbers|strings|matrix|
|:------:|:------:|:------:|
|320|ᚳᚪᚱᚾᚪᛚ (KARNAL), ᚪᚾᚪᛚᚩᚷ (ANALOG)|1|
|226|ᛗᚩᛒᛁᚢᛋ (MOBIUS)|1|
|366|ᚫᚦᛖᚱᛠᛚ (AETHEREAL)|1|
|91|ᚠᚱᚩᛗ (FROM), ᚠᚩᚱᛗ (FORM)|1|
|245|ᚩᛒᛋᚳᚢᚱᚪ (OBSKURA)|1|
|151|ᚠᛁᚾᛞ (FIND)|1|
|341|ᛋᚻᚪᛞᚩᚹᛋ (SHADOWS), ᚳᚪᛒᚪᛚ (KABAL)|1|
|18|ᚩᚱ (OR)|1|
|138|ᚹᚻᛖᚾ (WHEN)|1|
|199|ᛗᚩᚢᚱᚾᚠᚢᛚ (MOURNFUL), ᛒᚢᚠᚠᛖᚱᛋ (BUFFERS)|1|
|131|*not found*|1|
|130|ᚢᚩᛁᛞ (UOID)|1|
|272|ᛏᛖᛚᛚ (TELL), ᛁᛗᛈᚩᛋᛖ (IMPOSE)|1|
|620|*not found*|2|
|434|ᚱᛠᛚᛁᛏᛁᛖᛋ (REALITIES)|2|
|1071|*not found*|2|
|626|*not found*|2|
|812|*not found*|2|
|280|ᛁᚾᛋᛏᚪᚱ (INSTAR)|2|
|934|*not found*|2|
|1311|*not found*|2|
|278|*not found*|2|
|204|*not found*|2|
|966|*not found*|2|
|809|*not found*|2|
|312|*not found*|2|

## Discussion 
Because the map between English rune strings and gematria sums is not one-to-one and onto, it does not have a well-defined inverse.  It is thus unclear how to match an arbitrary natural number with a string.  Restricting the search to a universe of strings could help, but there is no guarantee that it will. It is difficult, perhaps impossible, to find a natural corpus large enough to provide English words for each number in the squares and still small enough to avoid the problem of an abundance of repeats.
 
## Final Words

3301 certainly seemed to be teaching solvers how to calculate gematria sums in 2013 and 2014. The magic square in section 3 of *Liber Primus* was part of that education and remains a tantalizing clue. However, given their limitations, it is unclear if gematria sums can help to decrypt the remainder of  *Liber Primus*.
